#!/bin/sh

#create db

if  [ ! -f /opt/dbspace/.media.db ]
then
	sqlite3 /opt/dbspace/.media.db 'PRAGMA journal_mode = PERSIST;
	
	CREATE TABLE visual_folder(folder_uuid VARCHAR(256) PRIMARY KEY, path VARCHAR(256), folder_name VARCHAR(256), modified_date INT, web_account_id VARCHAR(256), storage_type INT, sns_type INT, lock_status INT, web_album_id VARCHAR(256), valid INT, unique(path, folder_name, web_album_id, storage_type) );
	INSERT INTO "visual_folder" VALUES("31e8854f-fa38-499c-ad0b-ebd7fc195f72","/opt/media/Images","Images",946990496,"",0,0,0,"",1);
	CREATE TABLE image_meta(_id INTEGER PRIMARY KEY AUTOINCREMENT, visual_uuid VARCHAR(256), longitude DOUBLE, latitude DOUBLE, description VARCHAR(256), width INT, height INT, orientation INT, datetaken INT, unique(visual_uuid) );
	INSERT INTO "image_meta" VALUES(1,"d523de83-1bd3-4420-b3ae-30cc09fadd7e",1000.0,1000.0,"No description",1280,720,1,1328593573);
	INSERT INTO "image_meta" VALUES(2,"bce4c371-3567-4393-80c9-03696e95cf72",1000.0,1000.0,"No description",1280,720,1,1328594459);
	INSERT INTO "image_meta" VALUES(3,"acc3f51a-06ed-4eeb-9589-4ec8471aebc0",1000.0,1000.0,"No description",1280,720,1,1328680445);
	INSERT INTO "image_meta" VALUES(4,"859f496f-9c93-402a-8fa9-bbadccca017d",1000.0,1000.0,"No description",1280,720,1,1328593816);
	INSERT INTO "image_meta" VALUES(5,"a911ce7d-30e9-45fe-8f01-ca0fecb359c9",1000.0,1000.0,"No description",720,1280,1,1319103726);
	INSERT INTO "image_meta" VALUES(6,"257849e1-03d0-401a-bfeb-88374fed528a",1000.0,1000.0,"No description",1280,720,1,1319103804);
	INSERT INTO "image_meta" VALUES(7,"64c33db5-74dd-46c9-b31c-945278127cf8",1000.0,1000.0,"No description",720,1280,1,1319103711);
	INSERT INTO "image_meta" VALUES(8,"fb07a723-63a7-4591-bcf6-950de63f9dd6",1000.0,1000.0,"No description",1280,720,1,1328594351);
	INSERT INTO "image_meta" VALUES(9,"91b21d6e-a642-4b0f-a221-b30048ca907c",1000.0,1000.0,"                               ",1280,720,1,1328593485);
	INSERT INTO "image_meta" VALUES(10,"f402c7be-4121-49d9-97a1-3be23314d6e5",1000.0,1000.0,"No description",1280,720,1,1319103566);
	INSERT INTO "image_meta" VALUES(11,"d678a3c3-2594-4743-b7ec-204094877005",1000.0,1000.0,"No description",1280,720,1,1328684387);
	INSERT INTO "image_meta" VALUES(12,"edfe77a5-da1b-4cb3-83fb-90fea7dce551",1000.0,1000.0,"No description",1280,720,1,1328594384);
	INSERT INTO "image_meta" VALUES(13,"32711540-7b16-40c1-8d71-80092f94ccea",1000.0,1000.0,"No description",1280,720,1,1328593514);
	INSERT INTO "image_meta" VALUES(14,"b64c439e-8cd2-4901-8d0e-b69a192cfd9e",1000.0,1000.0,"No description",720,1280,1,1328593777);
	INSERT INTO "image_meta" VALUES(15,"b3efff75-34be-456d-97bb-bb5e1307751f",1000.0,1000.0,"No description",1280,720,1,1319158904);
	INSERT INTO "image_meta" VALUES(16,"a442ad71-3f55-4d57-8ec1-63745bb43de8",1000.0,1000.0,"No description",1280,720,1,1319103819);
	INSERT INTO "image_meta" VALUES(17,"60f9d85a-324d-414b-804c-b8e627ddb4ba",1000.0,1000.0,"No description",720,1280,1,1328593473);
	INSERT INTO "image_meta" VALUES(18,"8baca8e4-cb80-49c3-b994-6597b67b7a89",1000.0,1000.0,"No description",720,1280,1,1319103686);
	CREATE TABLE visual_media(visual_uuid VARCHAR(256) PRIMARY KEY, path VARCHAR(256), folder_uuid VARCHAR(256), display_name VARCHAR(256), content_type INT, rating INT, modified_date INT, thumbnail_path VARCHAR(256), http_url VARCHAR(256), size INT, valid INT, unique(path, folder_uuid, display_name) );
	INSERT INTO "visual_media" VALUES("d678a3c3-2594-4743-b7ec-204094877005","/opt/media/Images/image1.jpg","31e8854f-fa38-499c-ad0b-ebd7fc195f72","image1.jpg",1,0,1328684390,"/opt/data/file-manager-service/.thumb/phone/.jpg-f5052c8428c4a22231d6ece0c63b74bd.jpg","",751750,1);
	INSERT INTO "visual_media" VALUES("acc3f51a-06ed-4eeb-9589-4ec8471aebc0","/opt/media/Images/image2.jpg","31e8854f-fa38-499c-ad0b-ebd7fc195f72","image2.jpg",1,0,1328680448,"/opt/data/file-manager-service/.thumb/phone/.jpg-93d14e2e94dfbccc9f38a14c4be6a780.jpg","",254304,1);
	INSERT INTO "visual_media" VALUES("d523de83-1bd3-4420-b3ae-30cc09fadd7e","/opt/media/Images/image3.jpg","31e8854f-fa38-499c-ad0b-ebd7fc195f72","image3.jpg",1,0,1328593576,"/opt/data/file-manager-service/.thumb/phone/.jpg-03bdfd7e4d43c736819639b84a590b5f.jpg","",738597,1);
	INSERT INTO "visual_media" VALUES("91b21d6e-a642-4b0f-a221-b30048ca907c","/opt/media/Images/image4.jpg","31e8854f-fa38-499c-ad0b-ebd7fc195f72","image4.jpg",1,0,1328593488,"/opt/data/file-manager-service/.thumb/phone/.jpg-8ea059905f24eea065a7998dc5ff1f7e.jpg","",609139,1);
	INSERT INTO "visual_media" VALUES("32711540-7b16-40c1-8d71-80092f94ccea","/opt/media/Images/image5.jpg","31e8854f-fa38-499c-ad0b-ebd7fc195f72","image5.jpg",1,0,1328593516,"/opt/data/file-manager-service/.thumb/phone/.jpg-c468b6d8820bfc0d9311d76f6575251a.jpg","",773064,1);
	INSERT INTO "visual_media" VALUES("f402c7be-4121-49d9-97a1-3be23314d6e5","/opt/media/Images/image6.jpg","31e8854f-fa38-499c-ad0b-ebd7fc195f72","image6.jpg",1,0,1319103570,"/opt/data/file-manager-service/.thumb/phone/.jpg-10555c13cdfe5a763a69e08489de3c70.jpg","",682883,1);
	INSERT INTO "visual_media" VALUES("64c33db5-74dd-46c9-b31c-945278127cf8","/opt/media/Images/image7.jpg","31e8854f-fa38-499c-ad0b-ebd7fc195f72","image7.jpg",1,0,1319103714,"/opt/data/file-manager-service/.thumb/phone/.jpg-fc4557b53139ca8f35a3f13cea24ed13.jpg","",1073428,1);
	INSERT INTO "visual_media" VALUES("b3efff75-34be-456d-97bb-bb5e1307751f","/opt/media/Images/image8.jpg","31e8854f-fa38-499c-ad0b-ebd7fc195f72","image8.jpg",1,0,1319158906,"/opt/data/file-manager-service/.thumb/phone/.jpg-5876701a15ec16bd0226ed00044cad92.jpg","",930876,1);
	INSERT INTO "visual_media" VALUES("a442ad71-3f55-4d57-8ec1-63745bb43de8","/opt/media/Images/image9.jpg","31e8854f-fa38-499c-ad0b-ebd7fc195f72","image9.jpg",1,0,1319103822,"/opt/data/file-manager-service/.thumb/phone/.jpg-e82b0d23bfecbddaad1b98be7674b96e.jpg","",1168466,1);
	INSERT INTO "visual_media" VALUES("257849e1-03d0-401a-bfeb-88374fed528a","/opt/media/Images/image10.jpg","31e8854f-fa38-499c-ad0b-ebd7fc195f72","image10.jpg",1,0,1319103806,"/opt/data/file-manager-service/.thumb/phone/.jpg-70a952ceff9175115b8c3fd044cdf978.jpg","",1236980,1);
	INSERT INTO "visual_media" VALUES("b64c439e-8cd2-4901-8d0e-b69a192cfd9e","/opt/media/Images/image11.jpg","31e8854f-fa38-499c-ad0b-ebd7fc195f72","image11.jpg",1,0,1328593780,"/opt/data/file-manager-service/.thumb/phone/.jpg-773fffb8f086e5954f15407b41c2635d.jpg","",656364,1);
	INSERT INTO "visual_media" VALUES("859f496f-9c93-402a-8fa9-bbadccca017d","/opt/media/Images/image12.jpg","31e8854f-fa38-499c-ad0b-ebd7fc195f72","image12.jpg",1,0,1328593818,"/opt/data/file-manager-service/.thumb/phone/.jpg-e32fd6fd44abe296c14de2407bab1f93.jpg","",519167,1);
	INSERT INTO "visual_media" VALUES("fb07a723-63a7-4591-bcf6-950de63f9dd6","/opt/media/Images/image13.jpg","31e8854f-fa38-499c-ad0b-ebd7fc195f72","image13.jpg",1,0,1328594354,"/opt/data/file-manager-service/.thumb/phone/.jpg-825ded447a3ce04d14d737f93d7cee26.jpg","",549310,1);
	INSERT INTO "visual_media" VALUES("edfe77a5-da1b-4cb3-83fb-90fea7dce551","/opt/media/Images/image14.jpg","31e8854f-fa38-499c-ad0b-ebd7fc195f72","image14.jpg",1,0,1328594386,"/opt/data/file-manager-service/.thumb/phone/.jpg-6f7e6adae30603c45be7db083610d0a3.jpg","",452386,1);
	INSERT INTO "visual_media" VALUES("bce4c371-3567-4393-80c9-03696e95cf72","/opt/media/Images/image15.jpg","31e8854f-fa38-499c-ad0b-ebd7fc195f72","image15.jpg",1,0,1328594460,"/opt/data/file-manager-service/.thumb/phone/.jpg-de79768105a730492b3b28ca33ff89f4.jpg","",484926,1);
	INSERT INTO "visual_media" VALUES("a911ce7d-30e9-45fe-8f01-ca0fecb359c9","/opt/media/Images/image16.jpg","31e8854f-fa38-499c-ad0b-ebd7fc195f72","image16.jpg",1,0,1319103728,"/opt/data/file-manager-service/.thumb/phone/.jpg-aa5afe63b8aaa41079f9f37297d0763f.jpg","",1443416,1);
	INSERT INTO "visual_media" VALUES("8baca8e4-cb80-49c3-b994-6597b67b7a89","/opt/media/Images/Default.jpg","31e8854f-fa38-499c-ad0b-ebd7fc195f72","Default.jpg",1,0,1319103690,"/opt/data/file-manager-service/.thumb/phone/.jpg-a19569ad296e9655d1fbf216f195f801.jpg","",632118,1);
	INSERT INTO "visual_media" VALUES("60f9d85a-324d-414b-804c-b8e627ddb4ba","/opt/media/Images/Home_default.jpg","31e8854f-fa38-499c-ad0b-ebd7fc195f72","Home_default.jpg",1,0,1328593476,"/opt/data/file-manager-service/.thumb/phone/.jpg-66784c0b912f077f0a8de56a2f56161e.jpg","",554116,1);
	CREATE TABLE video_bookmark(_id INTEGER PRIMARY KEY AUTOINCREMENT, visual_uuid VARCHAR(256), marked_time INT, thumbnail_path VARCHAR(256), unique( visual_uuid, marked_time) );
	CREATE TABLE video_meta(_id INTEGER PRIMARY KEY AUTOINCREMENT, visual_uuid VARCHAR(256), album VARCHAR(256), artist VARCHAR(256), title VARCHAR(256), genre VARCHAR(256), description VARCHAR(256), youtube_category VARCHAR(256), last_played_time INT, duration INT, longitude DOUBLE, latitude DOUBLE, width INT, height INT, datetaken INT, unique(visual_uuid) );
	CREATE TABLE web_streaming(_id INTEGER PRIMARY KEY AUTOINCREMENT, folder_id INT, folder_uuid VARCHAR(256), title VARCHAR(256), duration INT, url VARCHAR(256), thumb_path VARCHAR(256));
	CREATE TABLE visual_tag_map(_id INTEGER PRIMARY KEY AUTOINCREMENT, visual_uuid VARCHAR(256), tag_id INT, unique( visual_uuid, tag_id) );
	CREATE TABLE visual_tag(_id INTEGER PRIMARY KEY AUTOINCREMENT, tag_name VARCHAR(256), unique( tag_name) );
	CREATE TABLE audio_media (audio_uuid text primary key, path text unique, file_name text, thumbnail_path text, title text, album text, artist text, genre text, author text, year integer default -1, copyright text, description text, format text, bitrate integer default -1, track_num integer default -1, duration integer default -1, rating integer default 0, played_count integer default 0, last_played_time integer default -1, added_time integer, rated_time integer, album_rating integer default 0, modified_date integer default 0, size integer default 0, category INTEGER default 0, valid integer default 0, folder_uuid TEXT NOT NULL, storage_type integer, favourite   integer default 0, content_type integer default 3);
	CREATE TABLE audio_folder (folder_uuid TEXT primary key, path text, folder_name text, storage_type integer, modified_date integer default 0);
	CREATE TABLE audio_playlists (_id integer primary key autoincrement, name TEXT NOT NULL UNIQUE);
	CREATE TABLE audio_playlists_map (_id integer primary key autoincrement, playlist_id integer, audio_uuid TEXT NOT NULL, play_order INTEGER);
	DELETE FROM sqlite_sequence;
	INSERT INTO "sqlite_sequence" VALUES("image_meta",18);
	INSERT INTO "sqlite_sequence" VALUES("video_meta",0);
	CREATE INDEX f_mid_idx on visual_media(folder_uuid);
	CREATE INDEX fid_idx on visual_folder(folder_uuid);
	CREATE INDEX m_date_idx on visual_media(modified_date);
	CREATE INDEX mid_idx on visual_media(visual_uuid);
	CREATE VIEW item_view AS select visual_uuid as item_id, path as file_path, display_name,thumbnail_path as thumbnail,modified_date as date_modified, folder_uuid, rating as favourite, content_type from visual_media where valid=1 union select  audio_uuid ,path ,title ,thumbnail_path, modified_date, folder_uuid, favourite, content_type from audio_media;
	CREATE VIEW mediainfo_folder AS select folder_uuid, path, folder_name as name, storage_type from visual_folder where valid=1 union select folder_uuid, path, folder_name, storage_type from audio_folder;

	CREATE TABLE audio_custom(_id INTEGER PRIMARY KEY AUTOINCREMENT, audio_uuid TEXT, author TEXT, provider TEXT, keyword TEXT, description TEXT, contentName TEXT, category TEXT, latitude DOUBLE, longitude DOUBLE, altitude DOUBLE, locationTag TEXT, rating TEXT, thumbnail_path TEXT);
	CREATE TABLE image_custom(_id INTEGER PRIMARY KEY AUTOINCREMENT, visual_uuid TEXT, author TEXT, provider TEXT, keyword TEXT, description TEXT, contentName TEXT, category TEXT, latitude DOUBLE, longitude DOUBLE, altitude DOUBLE, locationTag TEXT, rating TEXT, thumbnail_path TEXT);
	CREATE TABLE video_custom(_id INTEGER PRIMARY KEY AUTOINCREMENT, visual_uuid TEXT, author TEXT, provider TEXT, keyword TEXT, description TEXT, contentName TEXT, category TEXT, latitude DOUBLE, longitude DOUBLE, altitude DOUBLE, locationTag TEXT, rating TEXT, thumbnail_path TEXT);

	CREATE TABLE IF NOT EXISTS album (album_id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, artist TEXT, album_art TEXT, unique(name, artist));
	CREATE TABLE IF NOT EXISTS bookmark (bookmark_id INTEGER PRIMARY KEY AUTOINCREMENT, media_uuid TEXT NOT NULL, marked_time INTEGER DEFAULT 0, thumbnail_path  TEXT, unique(media_uuid, marked_time));
	CREATE TABLE IF NOT EXISTS folder (folder_uuid TEXT PRIMARY KEY, path TEXT NOT NULL UNIQUE, name TEXT NOT NULL, modified_time INTEGER DEFAULT 0, storage_type INTEGER, unique(path, name, storage_type));
	CREATE TABLE IF NOT EXISTS media (media_uuid TEXT PRIMARY KEY, path TEXT NOT NULL UNIQUE, file_name TEXT NOT NULL, media_type INTEGER, mime_type TEXT, size INTEGER DEFAULT 0, added_time INTEGER DEFAULT 0, modified_time INTEGER DEFAULT 0, folder_uuid TEXT NOT NULL, thumbnail_path TEXT, title TEXT, album_id INTEGER DEFAULT 0, album TEXT, artist TEXT, genre TEXT, composer TEXT, year TEXT, recorded_date TEXT, copyright TEXT, track_num TEXT, description TEXT, bitrate INTEGER DEFAULT -1, samplerate INTEGER DEFAULT -1, channel INTEGER DEFAULT -1, duration INTEGER DEFAULT -1, longitude DOUBLE DEFAULT 0, latitude DOUBLE DEFAULT 0, altitude DOUBLE DEFAULT 0, width INTEGER DEFAULT -1, height INTEGER DEFAULT -1, datetaken TEXT, orientation INTEGER DEFAULT -1, played_count INTEGER DEFAULT 0, last_played_time INTEGER DEFAULT 0, last_played_position INTEGER DEFAULT 0, rating INTEGER DEFAULT 0, favourite INTEGER DEFAULT 0, author TEXT, provider TEXT, content_name TEXT, category TEXT, location_tag TEXT, age_rating TEXT, keyword TEXT, is_drm INTEGER DEFAULT 0, storage_type INTEGER, validity INTEGER DEFAULT 1, unique(path, file_name) );
	CREATE TABLE IF NOT EXISTS playlist ( playlist_id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL UNIQUE );
	CREATE TABLE IF NOT EXISTS playlist_map ( _id INTEGER PRIMARY KEY AUTOINCREMENT, playlist_id INTEGER NOT NULL, media_uuid TEXT NOT NULL, play_order INTEGER NOT NULL );
	CREATE TABLE IF NOT EXISTS tag ( tag_id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL UNIQUE );
	CREATE TABLE IF NOT EXISTS tag_map ( _id INTEGER PRIMARY KEY AUTOINCREMENT, tag_id INTEGER NOT NULL, media_uuid TEXT NOT NULL, unique(tag_id, media_uuid) );
	CREATE INDEX folder_folder_uuid_idx on folder (folder_uuid);
	CREATE INDEX folder_uuid_idx on media (folder_uuid);
	CREATE INDEX media_album_idx on media (album);
	CREATE INDEX media_artist_idx on media (artist);
	CREATE INDEX media_author_idx on media (author);
	CREATE INDEX media_category_idx on media (category);
	CREATE INDEX media_composer_idx on media (composer);
	CREATE INDEX media_content_name_idx on media (content_name);
	CREATE INDEX media_file_name_idx on media (file_name);
	CREATE INDEX media_genre_idx on media (genre);
	CREATE INDEX media_location_tag_idx on media (location_tag);
	CREATE INDEX media_media_type_idx on media (media_type);
	CREATE INDEX media_media_uuid_idx on media (media_uuid);
	CREATE INDEX media_modified_time_idx on media (modified_time);
	CREATE INDEX media_path_idx on media (path);
	CREATE INDEX media_provider_idx on media (provider);
	CREATE INDEX media_title_idx on media (title);
	CREATE TRIGGER album_cleanup DELETE ON media BEGIN DELETE FROM album WHERE (SELECT count(*) FROM media WHERE album_id=old.album_id)=1 AND album_id=old.album_id;END;
	CREATE TRIGGER bookmark_cleanup DELETE ON media BEGIN DELETE FROM bookmark WHERE media_uuid=old.media_uuid;END;
	CREATE TRIGGER folder_cleanup DELETE ON media BEGIN DELETE FROM folder WHERE (SELECT count(*) FROM media WHERE folder_uuid=old.folder_uuid)=1 AND folder_uuid=old.folder_uuid;END;
	CREATE TRIGGER playlist_map_cleanup DELETE ON media BEGIN DELETE FROM playlist_map WHERE media_uuid=old.media_uuid;END;
	CREATE TRIGGER playlist_map_cleanup_1 DELETE ON playlist BEGIN DELETE FROM playlist_map WHERE playlist_id=old.playlist_id;END;
	CREATE TRIGGER tag_map_cleanup DELETE ON media BEGIN DELETE FROM tag_map WHERE media_uuid=old.media_uuid;END;
	CREATE TRIGGER tag_map_cleanup_1 DELETE ON tag BEGIN DELETE FROM tag_map WHERE tag_id=old.tag_id;END;
	INSERT INTO media VALUES("60aea677-4742-408e-b5f7-f2628062d06d","/opt/media/Images/Default.jpg","Default.jpg",0,"image/jpeg",632118,3023047,1337008628,"baeb79e5-a9da-4667-aeaf-6b98830e4ce8","/opt/data/file-manager-service/.thumb/phone/.jpg-f4b158eb0589220d0018c34e0d2175be.jpg",NULL,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,"No description",0,0,0,0,1000.0,1000.0,0.0,0,0,"2011:10:20 18:41:26",1,0,0,0,0,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,1);
	INSERT INTO media VALUES("84b3a64a-51ef-4b3a-bbaa-c527fbbcfa42","/opt/media/Images/image1.jpg","image1.jpg",0,"image/jpeg",751750,3023268,1337008628,"baeb79e5-a9da-4667-aeaf-6b98830e4ce8","/opt/data/file-manager-service/.thumb/phone/.jpg-f5052c8428c4a22231d6ece0c63b74bd.jpg",NULL,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,"No description",0,0,0,0,1000.0,1000.0,0.0,0,0,"2012:02:08 15:59:47",1,0,0,0,0,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,1);
	INSERT INTO media VALUES("51d282b7-06d7-4bce-aebc-59e46b15f7e7","/opt/media/Images/image13.jpg","image13.jpg",0,"image/jpeg",549310,3023473,1337008628,"baeb79e5-a9da-4667-aeaf-6b98830e4ce8","/opt/data/file-manager-service/.thumb/phone/.jpg-825ded447a3ce04d14d737f93d7cee26.jpg",NULL,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,"No description",0,0,0,0,1000.0,1000.0,0.0,0,0,"2012:02:07 14:59:11",1,0,0,0,0,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,1);
	INSERT INTO media VALUES("dd6d7c0b-273d-47f5-8a37-30ebac9ac3a3","/opt/media/Images/image4.jpg","image4.jpg",0,"image/jpeg",609139,3023702,1337008628,"baeb79e5-a9da-4667-aeaf-6b98830e4ce8","/opt/data/file-manager-service/.thumb/phone/.jpg-8ea059905f24eea065a7998dc5ff1f7e.jpg",NULL,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,"                               ",0,0,0,0,1000.0,1000.0,0.0,1280,720,"2012:02:07 14:44:45",1,0,0,0,0,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,1);
	INSERT INTO media VALUES("21141e5d-e6da-45e2-93d6-5fb5c5870adb","/opt/media/Images/image2.jpg","image2.jpg",0,"image/jpeg",254304,3023930,1337008628,"baeb79e5-a9da-4667-aeaf-6b98830e4ce8","/opt/data/file-manager-service/.thumb/phone/.jpg-93d14e2e94dfbccc9f38a14c4be6a780.jpg",NULL,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,"No description",0,0,0,0,1000.0,1000.0,0.0,1280,720,"2012:02:08 14:54:05",1,0,0,0,0,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,1);
	INSERT INTO media VALUES("2ec6f64b-c982-4c6a-9a70-1323d27f4aa5","/opt/media/Images/image9.jpg","image9.jpg",0,"image/jpeg",1168466,3024130,1337008628,"baeb79e5-a9da-4667-aeaf-6b98830e4ce8","/opt/data/file-manager-service/.thumb/phone/.jpg-e82b0d23bfecbddaad1b98be7674b96e.jpg",NULL,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,"No description",0,0,0,0,1000.0,1000.0,0.0,1280,720,"2011:10:20 18:43:39",1,0,0,0,0,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,1);
	INSERT INTO media VALUES("db1c184c-6f31-43b4-b924-8c00ac5b6197","/opt/media/Images/Home_default.jpg","Home_default.jpg",0,"image/jpeg",554116,3024507,1337008628,"baeb79e5-a9da-4667-aeaf-6b98830e4ce8","/opt/data/file-manager-service/.thumb/phone/.jpg-7c8d129b3ab1a7b153cfcbde4bea455a.jpg",NULL,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,"No description",0,0,0,0,1000.0,1000.0,0.0,720,1280,"2012:02:07 14:44:33",1,0,0,0,0,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,1);
	INSERT INTO media VALUES("1b25f4d9-ffff-4b83-8dbf-187a0a809985","/opt/media/Images/image15.jpg","image15.jpg",0,"image/jpeg",484926,3024713,1337008628,"baeb79e5-a9da-4667-aeaf-6b98830e4ce8","/opt/data/file-manager-service/.thumb/phone/.jpg-de79768105a730492b3b28ca33ff89f4.jpg",NULL,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,"No description",0,0,0,0,1000.0,1000.0,0.0,0,0,"2012:02:07 15:00:59",1,0,0,0,0,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,1);
	INSERT INTO media VALUES("b3ee9659-22bb-423d-99d0-ed35240545a8","/opt/media/Images/image12.jpg","image12.jpg",0,"image/jpeg",519167,3024908,1337008628,"baeb79e5-a9da-4667-aeaf-6b98830e4ce8","/opt/data/file-manager-service/.thumb/phone/.jpg-e32fd6fd44abe296c14de2407bab1f93.jpg",NULL,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,"No description",0,0,0,0,1000.0,1000.0,0.0,1280,720,"2012:02:07 14:50:16",1,0,0,0,0,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,1);
	INSERT INTO media VALUES("0d905e54-4583-4de8-80c1-ee4117e06ddf","/opt/media/Images/image11.jpg","image11.jpg",0,"image/jpeg",656364,3025097,1337008628,"baeb79e5-a9da-4667-aeaf-6b98830e4ce8","/opt/data/file-manager-service/.thumb/phone/.jpg-773fffb8f086e5954f15407b41c2635d.jpg",NULL,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,"No description",0,0,0,0,1000.0,1000.0,0.0,720,1280,"2012:02:07 14:49:37",1,0,0,0,0,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,1);
	INSERT INTO media VALUES("bc1eae57-376e-4ff3-b6a0-edcff8c7a1b1","/opt/media/Images/image5.jpg","image5.jpg",0,"image/jpeg",773064,3025291,1337008628,"baeb79e5-a9da-4667-aeaf-6b98830e4ce8","/opt/data/file-manager-service/.thumb/phone/.jpg-c468b6d8820bfc0d9311d76f6575251a.jpg",NULL,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,"No description",0,0,0,0,1000.0,1000.0,0.0,1280,720,"2012:02:07 14:45:14",1,0,0,0,0,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,1);
	INSERT INTO media VALUES("eec305ed-ccb4-4abb-93f9-f087c823b1d4","/opt/media/Images/image6.jpg","image6.jpg",0,"image/jpeg",682883,3025500,1337008628,"baeb79e5-a9da-4667-aeaf-6b98830e4ce8","/opt/data/file-manager-service/.thumb/phone/.jpg-10555c13cdfe5a763a69e08489de3c70.jpg",NULL,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,"No description",0,0,0,0,1000.0,1000.0,0.0,0,0,"2011:10:20 18:39:26",1,0,0,0,0,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,1);
	INSERT INTO media VALUES("53101826-d64e-4d26-b448-acc1d94511a5","/opt/media/Images/image14.jpg","image14.jpg",0,"image/jpeg",452386,3025742,1337008628,"baeb79e5-a9da-4667-aeaf-6b98830e4ce8","/opt/data/file-manager-service/.thumb/phone/.jpg-6f7e6adae30603c45be7db083610d0a3.jpg",NULL,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,"No description",0,0,0,0,1000.0,1000.0,0.0,0,0,"2012:02:07 14:59:44",1,0,0,0,0,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,1);
	INSERT INTO media VALUES("dbf546ed-e984-45de-a85e-b1d750005036","/opt/media/Images/image8.jpg","image8.jpg",0,"image/jpeg",930876,3026032,1337008628,"baeb79e5-a9da-4667-aeaf-6b98830e4ce8","/opt/data/file-manager-service/.thumb/phone/.jpg-5876701a15ec16bd0226ed00044cad92.jpg",NULL,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,"No description",0,0,0,0,1000.0,1000.0,0.0,0,0,"2011:10:21 10:01:44",1,0,0,0,0,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,1);
	INSERT INTO media VALUES("696835a1-eaec-4602-8310-5e7ad9f4429b","/opt/media/Images/image10.jpg","image10.jpg",0,"image/jpeg",1236980,3027125,1337008628,"baeb79e5-a9da-4667-aeaf-6b98830e4ce8","/opt/data/file-manager-service/.thumb/phone/.jpg-70a952ceff9175115b8c3fd044cdf978.jpg",NULL,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,"No description",0,0,0,0,1000.0,1000.0,0.0,1280,720,"2011:10:20 18:43:24",1,0,0,0,0,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,1);
	INSERT INTO media VALUES("4a76c208-ca95-4b2f-9de1-86c82a45506d","/opt/media/Images/image16.jpg","image16.jpg",0,"image/jpeg",1443416,3027413,1337008628,"baeb79e5-a9da-4667-aeaf-6b98830e4ce8","/opt/data/file-manager-service/.thumb/phone/.jpg-aa5afe63b8aaa41079f9f37297d0763f.jpg",NULL,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,"No description",0,0,0,0,1000.0,1000.0,0.0,720,1280,"2011:10:20 18:42:06",1,0,0,0,0,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,1);
	INSERT INTO media VALUES("83b9fd32-cd53-4ba7-84b8-c3d507f4701d","/opt/media/Images/image7.jpg","image7.jpg",0,"image/jpeg",1073428,3027698,1337008628,"baeb79e5-a9da-4667-aeaf-6b98830e4ce8","/opt/data/file-manager-service/.thumb/phone/.jpg-fc4557b53139ca8f35a3f13cea24ed13.jpg",NULL,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,"No description",0,0,0,0,1000.0,1000.0,0.0,0,0,"2011:10:20 18:41:51",1,0,0,0,0,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,1);
	INSERT INTO media VALUES("a2b3cbf8-82e3-456f-b912-74b0a646da6e","/opt/media/Images/image3.jpg","image3.jpg",0,"image/jpeg",738597,3027977,1337008628,"baeb79e5-a9da-4667-aeaf-6b98830e4ce8","/opt/data/file-manager-service/.thumb/phone/.jpg-03bdfd7e4d43c736819639b84a590b5f.jpg",NULL,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,"No description",0,0,0,0,1000.0,1000.0,0.0,0,0,"2012:02:07 14:46:13",1,0,0,0,0,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,1);

	INSERT INTO folder VALUES("baeb79e5-a9da-4667-aeaf-6b98830e4ce8","/opt/media/Images","Images",1337008628,0);
'
fi

if [ "${USER}" == "root" ]
then
        if  [ -f /opt/dbspace/.media.db ]
        then
                chgrp 6017 /opt/dbspace/.media.db
                chgrp 6017 /opt/dbspace/.media.db-journal
        fi
fi

if  [ -f /opt/dbspace/.media.db ]
then
        chmod 664 /opt/dbspace/.media.db
        chmod 664 /opt/dbspace/.media.db-journal
fi


if [ "${USER}" == "root" ]
	chgrp 5000 /opt/data/file-manager-service
	chgrp 5000 /opt/data/file-manager-service/.thumb
	chgrp 5000 /opt/data/file-manager-service/.thumb/phone
	chgrp 5000 /opt/data/file-manager-service/.thumb/mmc
then
##resources
	chgrp 5000 /opt/dbspace
	chgrp 5000 /opt/data/file-manager-service/.thumb/phone/.[a-z0-9]*.*
fi

##resources
chmod 775 /opt/data/file-manager-service
chmod 775 /opt/data/file-manager-service/.thumb
chmod 775 /opt/data/file-manager-service/.thumb/phone
chmod 775 /opt/data/file-manager-service/.thumb/mmc
rm /opt/media/Downloads/.gitignore
rm /opt/media/Music/.gitignore
rm /opt/media/Videos/.gitignore
rm /opt/media/Camera/.gitignore
rm /opt/media/Sounds/Voice\ recorder/.gitignore
rm /opt/media/Sounds/FM\ Radio/.gitignore
